---
title: Git 学习笔记
date: 2020-04-12
categories: [科研]
tags: [学习笔记, 技术]
img_path: /assets/img/
---

Git 是一个软件，它和其他软件一样需要安装。原始的 Git 和 Python、Conda 等类似，命令行操作。

先讲命令行操作

[Git 官方文档在这里！](https://git-scm.com/docs)

剥洋葱式的学习。

概念 

命令


# 最简单

当作网盘。

git commit -a

不包含 Staged 这个层。


Github desktop 里，打勾就是 Add


git rm = 手动删除 + git add。（真的删除，让 Git 记录下来，）
git rm --cached = 手动删除 + git add + 还原回来。  （即从 Git 记录里删除，但是不删除本地文件）

# 单人


必须先在远程（GitHub）创建仓库，让连接有效。

Push 需要密码，Fetch/pull 不需要密码？



当前branch 用头指针 HEAD 实现。

merge有2 种形式：
- fast-forward （有祖先关系）直接指针前移。注意：commit 树父子关系不存在冲突
- 在两叉上的。新建一个 commit 叫 merge commit

在当前环境 A 下 git merge B 指将 B merge 到 A。



Git 是不管文件夹的


# 多人协作




# 本地操作




stage 翻译：暂存

修改配置文件：
git config --system/--global/--local
显示全部配置：git config --list （--show-origin）
git 


Git 是在本地数据库中存放的，commit 之后不是上传到服务器。

三阶段：

git add 
- track new files
- stage files
- 

git reset 撤销所有 add

git commit 
- commit 是一次把所有staged 东西
- 


git clone <url>'


git status

git status -s

- M：Modified
- A：
- D：
记录只有这几种，没有移动等记录。移动等于删除加新建。


新加入的文件默认 untracked。因为不想让一些生成的二进制文件也纳入。




.git 是一个文件夹



# 与服务器交互




# Git GUI

GUI 只能实现一部分命令行的。为了方便。



# Git 的功能与规则

## 分支

Git 是一个版本管理系统。从数学模型上看，在 Git 中，项目的各个版本构成一个有向无环图，图的结点对应版本。在项目开发过程中，这个图是从根结点（拓扑序第一位，代表空项目）开始，按以下两种方式不断构造出来的：

  - 在一个版本 A 基础上修改后得到新版本 B：就是新建 B 结点并以有向边指向 A 结点；
  - 对两个版本 A,B 作合并得到新版本 C：就是新建 C 结点并以两条有向边各自指向 A, B 结点。


> 第二种情况两个版本合并时可能会存在冲突，应当手动解决冲突后才能合并。第一种情况不会有冲突这个概念。
{: .prompt-warning }

最终可能会得到如下一张图。


举例：一个文件版本 1，


在 Git 中，每次新建结点（即得到新版本）称为一次提交（commit）。（这个词很好理解，就是提交了新版本给 Git 让他管理） 因此，一个结点/版本对应了一个 commit。这些 commit 是 Git 数据库中的一条条记录，每条 commit 包括信息：

- 提交者、提交时间；（提交者涉及多人，见下面多人协作）
- 对应的版本内容；
- 父结点信息：父结点可能有 1 或 2 个，分别对应上面两种构造方式。就是一个指针指向父结点对应的 commit 记录。注意，在结点中存父结点信息，就能完全确定这张图（参考数据结构知识）。
- 修改记录：相对于父结点对应的版本作了哪些修改。

可以看到，它的特点是允许分支结构（且允许两个分支合并）。我们仔细想想分支结构的意义是什么：为什么不把版本按照时间顺序穿成一个线性的图（如下），为什么要搞出分支？父结点的意义——**基于哪个版本的修改**。如果只按时间线型（相当于父结点必须是上一个时间的），父结点就失去了此意义。
对此粒，D 事实上是基于 B 修改的，如果按照时间线型，就是强行看成看成基于 C 修改的。修改记录是绑定于父节点的，这会导致修改记录变的冗长。总之，提供分支结构就是为用户多了一种管理办法，即不是只按照时间来（容易混乱），允许用户提供“基于哪个版本的修改”这个信息，让其版本管理更条理。

## 多人协作

Git 的另一个功能是为多人协作提供方便。多人协作强调同时。的简单实现方式是大家共用一个项目 copy，所有 commit，。这种叫中心化。

中心化要考虑这个共用的项目放在哪里。肯定不能放在一台电脑（PC）的本地，不行。一台电脑只能一个人用，而且多个人不一定在一个地方；只能放在一台服务器上，让大家都去连，所有的操作都是**直接**对服务器里的项目，大家看到的都是实时的最新的。

这样服务器要一直开机，否则无法访问项目。

为解决这一问题，只能保存在本地。分布式直接把整个项目都在各个合作者的本地电脑里复制一份，定期与服务器上的同步（顺带的好处是防止中心化的副本存在问题是）。所谓同步包括从服务器上下载到本地（pull）和从本地上传到服务器（push）。无论是 pull 还是 push，都是把两个 commit 图合并。由于本地项目总是来自服务器项目，反之亦然，所以一定是有公共节点。合并就是从公共部分开始合并。

## 分支

分支是用指针。分支总是指向最新的，所以不会倒回去。

push 和 pull 冲突问题。




如果手动以备份文件并命名的方式来实现以上版本管理，

## GitHub 里的多人协作

更远了一层的外人。权限问题。

多人协作权限是。。
外人的权限是，，


# 版本管理的应用场景

Git 这个工具提供了全面的版本管理逻辑。所以技能完成简单的版本管理，也能完成复杂的。

##

在写东西或开发项目时，在不同的工作阶段会得到不同的版本。若我们工作流程只需要一股脑往前冲，则那些旧版本根本不用管，只需要保存好当前的版本，不断在其基础上完善即可。但是有些时候我们需要回退到某个旧版本，。对于多人协作，更是如此，
